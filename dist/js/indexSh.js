function callback(t){var e=t.map(function(t){var e=JSON.parse(t.goodsBenUrl);return'<div class="swiper-slide"> <img  class="image" goodsID = "'+t.goodsID+'" src = "'+e[0]+'"/></div>'});document.querySelector(".swiper-wrapper").innerHTML=e.join(""),new Swiper(".swiper-container",{direction:"horizontal",pagination:".swiper-pagination",autoply:1e3})}function abg(t){var e=t.map(function(t){var e=.1*t.discount<=0?1:.1*t.discount,i=parseInt(t.price/e);return'<div class="item"> <div class="itemLeft"><img class="image" goodsID = "'+t.goodsID+'" src="'+t.goodsListImg+'"/></div><div class="itemRight"><h3>'+t.goodsName+"</h3><i>￥"+t.price+'<span class="discount">￥'+i+'</span></i><span class="zhe">'+t.discount+'折</span><span id="cartIndex" gdsID="'+t.goodsID+'" class="iconfont icon-jiarugouwuche1"></span></div></div>'});document.querySelector(".login").innerHTML=e.join(""),scro.init()}document.addEventListener("DOMContentLoaded",function(){var t=640,e=document.documentElement,i=e.offsetWidth,n=i/t;e.style.fontSize=100*n+"px"});var sogo={init:function(){this.tip=document.querySelector('input[type="text"]'),this.glass=document.querySelector(".glass"),this.backtracks=document.querySelector(".backtrack"),this.glassDiv=document.querySelector(".glassDiv"),this.tipClick(),this.focusIpt(),this.blurIpt(),this.imgClick(),this.jsonp("http://datainfo.duapp.com/shopdata/getBanner.php"),this.jsonp("http://datainfo.duapp.com/shopdata/getGoods.php?callback=abg")},jsonp:function(t){var e=document.querySelector("#jsonp");e&&(e.id="");var i=document.createElement("script");i.id="jsonp",i.src=t,document.body.appendChild(i)},imgClick:function(){var t=this;document.onclick=function(e){var i=e.target;if("image"==i.className){var n=i.getAttribute("goodsID");localStorage.setItem("goodsID",n),location.href="spxq.html"}if(e.path.map(function(t){if("listID"==t.className){var e=t.getAttribute("id");localStorage.setItem("goodsID",e),location.href="spxq.html"}}),"cartIndex"==i.id){var a=localStorage.getItem("userID");if(null==a)alert("请登录后，再添加商品！");else{var n=i.getAttribute("gdsID");t.ajaxA(a,n,function(t){if(1==t){var e=localStorage.getItem("number");e++,localStorage.setItem("number",e);var i=document.querySelector("numberIndex");i.innerHTML=e,console.log(e),alert("商品添加成功！")}else alert("网络繁忙稍后 请重新添加！")})}}}},tipClick:function(){var t=this;document.onkeydown=function(e){e.target;if(32==e.keyCode){var i=t.tip.value;t.getData(i)}if(13==e.keyCode){var i=t.tip.value;t.getData(i)}}},focusIpt:function(){var t=this;this.tip.onfocus=function(){t.glass.style.display="block",t.backtracks.style.display="block"}},blurIpt:function(){var t=this;this.backtracks.onclick=function(){this.style.display="none",t.glass.style.display="none",document.querySelector(".ulList").innerHTML="",t.glassDiv.innerHTML="",t.tip.value=""}},ajaxA:function(t,e,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){200==n.status&&4==n.readyState&&i(n.responseText)},n.open("get","http://datainfo.duapp.com/shopdata/updatecar.php?userID="+t+"&goodsID="+e,!0),n.send()},getData:function(t){var e=this;t=encodeURI(t);var i=document.querySelector(".ulList");$.ajax({url:"http://datainfo.duapp.com/shopdata/selectGoodes.php",data:{selectText:t},dataType:"jsonp",success:function(t){if(0==t)i.innerHTML="",e.glassDiv.innerHTML="<li> 没有找到相关商品！</li>";else{e.glassDiv.innerHTML="";var n=['<li class="listID" id="{goodsID}"> <a href="javascript:">',"{className}<span>{goodsName}</span>","</a></li>"].join("");i.innerHTML=t.map(function(t){return n.replace(/{(\w+)}/g,function(){return t[arguments[1]]})}).join("")}}})}};sogo.init();var scro={init:function(){this.windTop=maxScroll=!1,this.cont=document.querySelector(".login"),this.yiime()},JsonP:function(){var t=this;this.scroAjax(function(e){e=JSON.parse(e);for(var i in e){var n=e[i],a=document.createElement("div"),o=parseInt(300*Math.random());a.className="item",a.innerHTML='<img src="'+n.images+'"/> <br>price:'+o,t.cont.insertBefore(a,t.cont.firstElementChild),is.refresh(),is.maxScrollY-=50}})},database:function(){var t=this;this.scroAjax(function(e){e=JSON.parse(e);for(var i in e){var n=e[i],a=document.createElement("div"),o=parseInt(300*Math.random());a.className="item",a.innerHTML='<img style="height:110px;width: 110px;" src="'+n.images+'"/> <br>price:'+o,t.cont.appendChild(a),is.refresh(),is.maxScrollY-=50}})},scroAjax:function(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){200==e.status&&4==e.readyState&&t(e.responseText)},e.open("get","js/index.json",!0),e.send()},yiime:function(){var t=this;setTimeout(function(){is=new IScroll(".wrapper",{probeType:3,click:!0}),is.maxScrollY-=50,is.on("scrollEnd",function(){t.windTop&&(t.windTop=!1,t.JsonP()),maxScroll&&(maxScroll=!1,t.database())}),is.on("scroll",function(){this.y>50&&(t.windTop=!0),this.y<this.maxScrollY-50&&(maxScroll=!0)})},0)}};