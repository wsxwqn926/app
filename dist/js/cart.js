function callback(e){var t=(e||[]).map(function(e){return'<div class="item"><div class="cartLeft"><img class="imag" goodsID="'+e.goodsID+'" src="'+e.goodsListImg+'"/></div><div class="cartRight" goodsID="'+e.goodsID+'"><h4>'+e.goodsName+'</h4><span id = "icon-lajixiang" class="iconfont icon-lajixiang"></span><p class="jige">单价: ￥<span class="price">'+e.price+'</span></p ><div class="shu">数量: <button class="jian">-</button> <input class="spshu" type="text" value="'+e.number+'"/> <button class="jia">+</button></div></div></div>'});document.querySelector(".cartContetn").innerHTML=t.join(""),new IScroll("section",{probeType:3,click:!0}),cart.numbers()}document.addEventListener("DOMContentLoaded",function(){var e=640,t=document.documentElement,n=t.offsetWidth,o=n/e;t.style.fontSize=100*o+"px"});var cart={init:function(){this.shuL=document.querySelector("#shuL"),this.zongJ=document.querySelector("#zongJ"),this.numberIndex=document.querySelector(".numberIndex"),this.update(),this.bomClick(),this.keyupDom()},jsonp:function(e){var t=document.querySelector("#jsonp");t&&(t.id="");var n=document.createElement("script");n.id="jsonp",n.src=e,document.body.appendChild(n)},update:function(){var e=localStorage.getItem("userID");this.jsonp("http://datainfo.duapp.com/shopdata/getCar.php?userID="+e)},bomClick:function(){var e=this;document.onclick=function(t){var n=t.target,o=localStorage.getItem("userID");if("imag"==n.className){var a=n.getAttribute("goodsID");localStorage.setItem("goodsID",a),location.href="spxq.html"}if("icon-lajixiang"==n.id)if(console.log(n),null==o)alert("请登录后进行操作！");else{var a=n.parentNode.getAttribute("goodsID"),r=0,s=n.parentNode.parentNode;confirm("确定要丢弃我吗？-_-")&&e.numberCart(o,a,r,s)}if("jian"==n.className){var i=n.parentNode.getElementsByTagName("input")[0],c=--i.value,u=n.parentNode.parentNode.parentNode,a=n.parentNode.parentNode.getAttribute("goodsID");e.numberCart(o,a,c,u)}if("jia"==n.className){var a=n.parentNode.parentNode.getAttribute("goodsID"),i=n.parentNode.getElementsByTagName("input")[0];console.log(i);var d=++i.value,l=n.parentNode.parentNode.parentNode;e.numberCart(o,a,d,l)}e.numbers()}},keyupDom:function(){document.onkeyup=function(e){9==e.keyCode&&window.history.back()}},blurCart:function(){document.focus=function(e){console.log(e)}},numberCart:function(e,t,n,o){n<=0&&(n=0),this.ajaxCart(e,t,n,function(e){0==e&&alert("系统繁忙 请稍后操作！")}),0==n&&o.parentNode.removeChild(o)},ajaxCart:function(e,t,n,o){var a=new XMLHttpRequest;a.onreadystatechange=function(){200==a.status&&4==a.readyState&&o(a.responseText)},console.log(n),a.open("get"," http://datainfo.duapp.com/shopdata/updatecar.php?userID="+e+"&goodsID="+t+"&number="+n,!0),a.send()},numbers:function(){for(var e=document.querySelectorAll(".price"),t=document.querySelectorAll(".spshu"),n=0,o=0,a=0;a<e.length;a++)n+=parseInt(t[a].value),sum=t[a].value*e[a].innerHTML,o+=sum;localStorage.setItem("number",n),this.numberIndex.innerHTML=this.shuL.innerHTML=n,this.zongJ.innerHTML=o.toFixed(2)}};cart.init();