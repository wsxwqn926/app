function callback(e){var t=e.map(function(e){var t=parseInt(e.price/(.1*e.discount));return'<div class="item"> <div class="imags" goodsId="'+e.goodsID+'"><img src="'+e.goodsListImg+'"/></div> <br><h4>'+e.goodsName+" </h4><p >价格:￥"+e.price+"<span>￥"+t+"</span></p></div>"});document.querySelector(".conter").innerHTML=t.join(""),scro.init()}var page={init:function(){this.bind(),this.getClass(function(e){var t=['<div class="swiper-slide"> ','<a class="conA" classID="{classID}" href="javascript:void(0)">{className}</a>',"</div>"].join("");e=JSON.parse(e);var n=e.map(function(e){return t.replace(/{(\w+)}/g,function(){return e[arguments[1]]})});document.querySelector(".swiper-wrapper").innerHTML=n.join(""),new Swiper(".swiper-container",{slidesPerView:5}),document.querySelector("a").click()})},getClass:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){200==t.status&&4==t.readyState&&e(t.responseText)},t.open("get","http://datainfo.duapp.com/shopdata/getclass.php",!0),t.send()},bind:function(){var e=this;document.onclick=function(t){var n=t.target;if("conA"==n.className){var a=document.querySelector(".active");a&&(a.className=""),n.className="active";var s=n.getAttribute("classid");e.jsonp("http://datainfo.duapp.com/shopdata/getGoods.php?classID="+s)}for(var i in t.path)if("imags"==t.path[i].className){var o=t.path[i].getAttribute("goodsId");localStorage.setItem("goodsID",o),location.href="spxq.html"}}},jsonp:function(e){var t=document.querySelector("#jsonp");t&&t.parentNode.removeChild(t);var n=document.createElement("script");n.src=e,n.id="jsonp",document.body.appendChild(n)}},scro={init:function(){this.windTop=maxScroll=!1,this.cont=document.querySelector(".conter"),this.yiime()},JsonP:function(){var e=this;this.scroAjax(function(t){t=JSON.parse(t);for(var n in t){var a=t[n],s=document.createElement("div"),i=parseInt(300*Math.random());s.className="item",s.innerHTML='<img src="'+a.images+'"/> <br>price:'+i,e.cont.insertBefore(s,e.cont.firstElementChild),is.refresh()}})},database:function(){var e=this;this.scroAjax(function(t){t=JSON.parse(t);for(var n in t){var a=t[n],s=document.createElement("div"),i=parseInt(300*Math.random());s.className="item",s.innerHTML='<img src="'+a.images+'"/> <br>price:'+i,e.cont.appendChild(s),is.refresh()}})},scroAjax:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){200==t.status&&4==t.readyState&&e(t.responseText)},t.open("get","js/index.json",!0),t.send()},yiime:function(){var e=this;setTimeout(function(){is=new IScroll(".wrapper",{probeType:3,click:!0}),is.refresh(),is.on("scrollEnd",function(){e.windTop&&(e.windTop=!1,e.JsonP()),maxScroll&&(maxScroll=!1,e.database())}),is.on("scroll",function(){this.y>50&&(e.windTop=!0),this.y<this.maxScrollY-50&&(maxScroll=!0)})},0)}};page.init();